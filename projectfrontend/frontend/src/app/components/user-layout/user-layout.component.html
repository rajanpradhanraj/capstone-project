<div class="user-layout">
  <!-- Top Navigation -->
  <mat-toolbar color="primary">
    <span class="navbar-brand">E-Commerce Store</span>
    
    <span class="spacer"></span>
    
    <!-- Navigation Links -->
    <button mat-button routerLink="/user/products" routerLinkActive="active">
      <mat-icon>store</mat-icon>
      Products
    </button>
    
    <button mat-button routerLink="/user/cart" routerLinkActive="active" class="position-relative">
      <mat-icon>shopping_cart</mat-icon>
      Cart
      <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
    </button>
    
    <button mat-button routerLink="/user/orders" routerLinkActive="active">
      <mat-icon>history</mat-icon>
      Orders
    </button>
    
    <!-- User Menu -->
    <button mat-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
      {{ currentUser?.username }}
    </button>
    
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        Logout
      </button>
    </mat-menu>
  </mat-toolbar>

  <!-- Main Content -->
  <div class="content">
    <router-outlet></router-outlet>
  </div>
</div>

<style>
.spacer {
  flex: 1 1 auto;
}

.cart-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background: #f44336;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: bold;
}

.content {
  padding: 20px;
  min-height: calc(100vh - 64px);
  background-color: #f5f5f5;
}

.mat-toolbar button.active {
  background-color: rgba(255, 255, 255, 0.1);
}

.navbar-brand {
  font-weight: 600;
  font-size: 1.2rem;
}
</style>

